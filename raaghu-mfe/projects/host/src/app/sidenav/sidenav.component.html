<div class="d-flex flex-column flex-root">
  <div class="page d-flex flex-column flex-column-fluid">
    <div class="header align-items-stretch">
      <mfe-loader [config]="rdsTopNavigationMfeConfig"></mfe-loader>
    </div>
    <div class="
        d-flex
        flex-column-fluid
        align-items-stretch
        container-fluid
        px-0
        main-body
      ">
      <div class="aside">
        <rds-side-nav [isPageWrapper]="true" [activeMenu]="activePage" (collapsedState)="onCollapse($event)"
          [collapseRequired]="collapseRequired" [sidenavItems]="getSideNavItems()" (emitPath)="redirectPath($event)"
          (selectedMode)="toggleBetweenMode($event)"></rds-side-nav>
        <!-- <rds-side-nav [isPageWrapper]="true"
                      (collapsedState)="onCollapse($event)" [collapseRequired]="collapseRequired"
                      [sidenavItems]="sidenavItems" (emitPath)="redirectPath($event)"></rds-side-nav> -->
      </div>
      <div class="wrapper d-flex flex-column flex-row-fluid rds-scrollable-wrapper pt-3 px-3"
        [class.collapsed]="sideMenuCollapsed">

        <div class="position-absolute">
          <ng-container *ngIf="currentAlerts && currentAlerts.length > 0">
            <mfe-loader [config]="rdsAlertMfeConfig"></mfe-loader>
          </ng-container>
        </div>
        <div>
          <router-outlet></router-outlet>
        </div>
      </div>
    </div>
  </div>
</div>

<rds-offcanvas [canvasTitle]="canvasTitle" [offcanvaswidth]="710" [offId]="'profile-canvas'" [placement]="'end'"
  (onClose)="close()">
  <div>
    <div *ngIf="canvasTitle == 'Linked Accounts'">
      <app-rds-linked-accounts [linkedAccountHeaders]="linkedAccountHeaders" [linkedAccountData]="linkedAccountData"
        [manageLinkedAccountsTabOpened]="" [pagination]="" [recordsPerpage]="">
      </app-rds-linked-accounts>
    </div>
    <div *ngIf="canvasTitle == 'My Accounts'">
      <rds-mysettings [ProfileData]="profileData" (onProfileSave)="onProfileSave($event)" [profileUrl]="profilePicUrl"
        (onProfilePicUpdate)="getProfilePic($event)" (onProfileClose)="close()">
      </rds-mysettings>
    </div>
    <div *ngIf="canvasTitle == 'Security Logs'">
      <rds-data-table [tableHeaders]="securityLogsHeaders" [tableStyle]="'light'" [tableData]="securityLogs"
        [recordsPerPage]="5" [pagination]="true" [noDataTitle]="'Currently you do not have security log'">
      </rds-data-table>
    </div>
    <div *ngIf="canvasTitle == 'Personal Data'">
      <rds-comp-personal-data [personalData]="personalData" (onDownloadData)="onDownloadData($event)"
        (onRequestData)="onRequestData()" (onDeleteData)="onDeleteData()"></rds-comp-personal-data>
    </div>
  </div>
</rds-offcanvas>